<div data-ng-include="'/templates/header--view.html'"></div>

<main class="container">
  <article class="feature-detail">
    <div class="column-16 feature-detail-content">
      <form data-ng-submit="page.saveReport()" class="form" role="form">

        <div class="form-row">
          <div class="form-label">
            <label for="report_date" class="control-label">
              Report Date
            </label>
          </div>
          <div class="form-field">
              <label for="report_date" class="control-label">
                Please set the date to the day you took the photos
              </label>

              <div class="form-element form-element-quarters">
                <p class="form-control form-control-disabled">
                  {{ page.date.day }}
                </p>
                <p class="help-text">
                  Day
                </p>
              </div>

              <div class="form-element form-element-quarters">
                <select class="form-control"
                        id="report_date_month" name="report_date_month"
                        data-ng-model="page.date.month"
                        data-ng-options="month for month in page.months">
                </select>
                <p class="help-text">
                  Month
                </p>
              </div>

              <div class="form-element form-element-quarters">
                <input number type="number" min="1" max="31" step="1"
                       class="form-control"
                       id="report_date_date" name="report_date_date"
                       data-ng-model="page.date.date"
                       data-ng-if="page.date.month === 'Jan' ||
                                   page.date.month === 'Mar' ||
                                   page.date.month === 'May' ||
                                   page.date.month === 'Jul' ||
                                   page.date.month === 'Aug' ||
                                   page.date.month === 'Oct' ||
                                   page.date.month === 'Dec'" />
               <input number type="number" min="1" max="30" step="1"
                      class="form-control"
                      id="report_date_date" name="report_date_date"
                      data-ng-model="page.date.date"
                      data-ng-if="page.date.month === 'Apr' ||
                                  page.date.month === 'Jun' ||
                                  page.date.month === 'Sep' ||
                                  page.date.month === 'Nov'" />
                <input number type="number" min="1" max="29" step="1"
                       class="form-control"
                       id="report_date_date" name="report_date_date"
                       data-ng-model="page.date.date"
                       data-ng-if="page.date.month === 'Feb'" />
               <p class="help-text">
                 Date
               </p>
             </div>

             <div class="form-element form-element-quarters">
               <input number type="number" min="1900" step="1"
                      class="form-control"
                      id="report_date_year" name="report_date_year"
                      data-ng-model="page.date.year" />
                <p class="help-text">
                  Year
                </p>
              </div>
          </div>
        </div>

        <!-- Measurement Period -->
        <div class="form-row">
          <div class="form-label">
            <label for="measurement_period" class="control-label">
              Measurement Period
            </label>
          </div>
          <div class="form-field">

            <div class="form-element">
              <select class="form-control"
                      data-ng-model="page.report.properties.measurement_period"
                      id="measurement_period" name="measurement_period"
                      required="required">
                <option value="Planning">Planning</option>
                <option value="Installation">Installation</option>
                <option value="Monitoring">Monitoring</option>
              </select>
            </div>
          </div>
        </div>

        <!-- WIP Reporting Agency -->
        <div class="form-row" data-ng-if="page.report.properties.measurement_period === 'Planning'">
          <div class="form-label">
            <label for="wip_reporting_agency" class="control-label">
              WIP Reporting Agency
            </label>
          </div>
          <div class="form-field">

            <div class="form-element">
              <select class="form-control" data-ng-model="page.report.properties.wip_reporting_agency" id="wip_reporting_agency" name="wip_reporting_agency">
                <option value="DC District Department of the Environment">DC District Department of the Environment</option>
                <option value="DE Department of Natural Resources and Environmental Control">DE Department of Natural Resources and Environmental Control</option>
                <option value="MD Department of Natural Resources">MD Department of Natural Resources</option>
                <option value="MD Department of the Environment">MD Department of the Environment</option>
                <option value="MD Department of Agriculture">MD Department of Agriculture</option>
                <option value="NY Department of Environmental Conservation">NY Department of Environmental Conservation</option>
                <option value="PA Department of Environmental Protection">PA Department of Environmental Protection</option>
                <option value="VA Department of Conservation and Recreation">VA Department of Conservation and Recreation</option>
                <option value="WV Department of Environmental Protection">WV Department of Environmental Protection</option>
              </select>
            </div>
          </div>
        </div>

        <div class="form-row"
             data-ng-if="page.report.properties.measurement_period === 'Planning' || page.report.properties.measurement_period === 'Installation'">
          <div class="form-label">
            <label for="wip_reporting_agency" class="control-label">
              Unit Area Load Model
            </label>
          </div>
          <div class="form-field">

            <div class="form-element form-element">

               <div class="form-element form-element">
                 <label for="custom_model_name" class="control-label">
                   Name of Custom Unit Area Loads Model
                 </label>

                 <input data-ng-model="page.report.properties.custom_model_name"
                        class="form-control" class="form-control" type="text"
                        id="custom_model_name" name="custom_model_name"
                        data-ng-disabled="page.report.properties.measurement_period === 'Installation'" />
               </div>

               <div class="form-element form-element">
                 <label for="custom_model_description" class="control-label">
                   Description of Custom Unit Area Loads Model
                 </label>

                 <input data-ng-model="page.report.properties.custom_model_description"
                        class="form-control" class="form-control" type="text"
                        id="custom_model_description" name="custom_model_description"
                        data-ng-disabled="page.report.properties.measurement_period === 'Installation'" />
               </div>

               <div class="form-element form-element">
                 <label for="custom_model_source" class="control-label">
                   Source of Custom Unit Area Loads Model
                 </label>

                 <input data-ng-model="page.report.properties.custom_model_source"
                        class="form-control" class="form-control" type="text"
                        id="custom_model_source" name="custom_model_source"
                        data-ng-disabled="page.report.properties.measurement_period === 'Installation'"
                        data-ng-required="page.report.properties.model_type === 'custom'" />
               </div>

              <!-- Custom Nitrogen Unit Area Loads -->
              <div class="form-element form-element-thirds">
                <label for="custom_model_nitrogen_total" class="control-label">
                  Nitrogen Reduction
                </label>

                <input data-ng-model="page.report.properties.custom_model_nitrogen_total"
                       class="form-control" class="form-control" type="number"
                       id="custom_model_nitrogen_total" name="custom_model_nitrogen_total"
                       disabled />
              </div>

              <!-- Custom Phosphorus Unit Area Loads -->
              <div class="form-element form-element-thirds">
                <label for="custom_model_phosphorus_total" class="control-label">
                  Phosphorus Reduction
                </label>

                <input data-ng-model="page.report.properties.custom_model_phosphorus_total"
                       class="form-control" class="form-control" type="number"
                       id="custom_model_phosphorus_total" name="custom_model_phosphorus_total"
                       disabled />
              </div>

              <!-- Custom Sediment Unit Area Loads -->
              <div class="form-element form-element-thirds">
                <label for="custom_model_sediment_total" class="control-label">
                  Sediment Reduction
                </label>

                <input data-ng-model="page.report.properties.custom_model_sediment_total"
                       class="form-control" class="form-control" type="number"
                       id="custom_model_sediment_total" name="custom_model_sediment_total"
                       disabled />
              </div>

            </div>

          </div>
        </div>

        <div class="form-row"
             data-ng-if="page.report.properties.measurement_period === 'Planning' || page.report.properties.measurement_period === 'Installation'">
          <div class="form-label">
            <label for="efficiency_agriculture_generic" class="control-label">
              Practices and Efficiencies
            </label>
          </div>
          <div class="form-row"
               data-ng-repeat="reading_ in page.report.properties.readings">

            <div class="form-field">

              <!-- Buffer Width -->
              <div class="form-element">
                <label for="efficiency_agriculture_generic" class="control-label">
                  Agricultural Practices and Efficiencies
                </label>

                <select class="form-control"
                        data-ng-model="reading_.practice_type_id"
                        id="practice_type_id" name="practice_type_id"
                        data-ng-options="value.properties.id as value.properties.name for value in page.practiceTypes.features | orderBy:'properties.best_management_practice'"
                        data-ng-disabled="page.report.properties.measurement_period === 'Installation'">
                    <option value="">-- Select a practice --</option>
                </select>

                <p class="help-text">
                  For full BMP definitions, efficiencies, and input guidance please <a href="http://help.fielddoc.org/#otheragbmps" target="_blank">visit the our help documentation article for the Other Agricultural Practices BMP</a>.
                </p>

              </div>

              <div class="form-element">
                <label for="practice_extent" class="control-label">
                  Practice Extent
                </label>

                <input class="form-control" data-ng-model="reading_.practice_extent"
                       id="reading_.practice_extent" name="reading_.practice_extent"
                       type="number"  />

              </div>

              <div class="form-element">
                <label for="practice_unit_id" class="control-label">
                  Units
                </label>

                <select class="form-control"
                        data-ng-model="reading_.practice_unit_id"
                        id="practice_unit_id" name="practice_unit_id"
                        data-ng-options="value.properties.id as value.properties.plural for value in page.unitTypes.features | orderBy:'properties.name'"
                        data-ng-disabled="page.report.properties.measurement_period === 'Installation'">
                    <option value="">-- Select a unit --</option>
                </select>

              </div>

              <div class="form-element">
                <label for="nitrogen_reduction" class="control-label">
                  Nitrogen Reduction
                </label>

                <input class="form-control" data-ng-model="nutrient[0].nitrogen"
                       id="nitrogen_reduction" name="nitrogen_reduction"
                       type="number"  />

                <p class="help--text">Percentages must be in decimal format from 0.0-1.0</p>

              </div>

              <div class="form-element">
                <label for="phosphorus_reduction" class="control-label">
                  Phosphorus Reduction
                </label>

                <input class="form-control" data-ng-model="nutrient[0].phosphorus"
                       id="phosphorus_reduction" name="phosphorus_reduction"
                       type="number"  />

                <p class="help--text">Percentages must be in decimal format from 0.0-1.0</p>

              </div>

              <div class="form-element">
                <label for="sediment_reduction" class="control-label">
                  Sediment Reduction
                </label>

                <input class="form-control" data-ng-model="nutrient[0].sediment"
                       id="sediment_reduction" name="sediment_reduction"
                       type="number"  />

                <p class="help--text">Percentages must be in decimal format from 0.0-1.0</p>

              </div>

            </div>
          </div>
          <div class="form-row">
            <div class="form-field">
              <a href="javascript:void(0)"
                 data-ng-click="page.report.properties.readings.push({})">
                 + add a practice
               </a>
             </div>
           </div>
        </div>


        <div class="form-row"
             data-ng-if="page.report.properties.measurement_period === 'Planning' || page.report.properties.measurement_period === 'Installation' || page.report.properties.measurement_period === 'Monitoring'">
          <div class="form-label">
            <label for="notes" class="control-label">
              Notes
            </label>
          </div>
          <div class="form-field">

            <div class="form-element">
              <textarea rows="8" data-ng-model="page.report.properties.notes"
                        class="form-control animate"  msd-elastic id="notes"
                        name="notes">{{ page.report.properties.notes }}</textarea>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <div class="form-actions-buttons"></div>
          <div class="form-actions-buttons">
            <button type="submit"class="button button-submit">
              Save Changes
            </button>
            <button type="button" data-ng-click="page.deleteReport()"
                    class="button button-link button-outline pull-right">
              Delete
            </button>
          </div>
        </div>
      </form>
    </div>
  </article>
</main>

<div data-ng-include="'/templates/footer--view.html'"></div>
