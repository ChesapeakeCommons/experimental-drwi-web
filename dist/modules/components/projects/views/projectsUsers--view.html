<div data-ng-include="'/templates/header--view.html'"></div>

<main class="site--content--flow fluid-content clearfix distinguish" save2pdf>

    <div id="sidebar" data-ng-include="'/templates/side-bar.html'"></div>

    <div class="content--container" style="border-right: 1px solid #e0e0e0;">

        <h1 class="inset">Collaborators</h1>

        <div class="main--ui">

            <article class="feature-detail" style="width: 100%; max-width: 48rem; margin: 1em auto;">

                <div class="form--row">

                    <form role="form" class="form" id="form--ProjectOwners" name="form--ProjectOwners" data-ng-submit="page.saveProject()">

                        <div class="classification--search">
                            <p>Add or remove project members here. Please remember that everyone on the team will have full access to all editing capabilities, so make sure you grant these permissions only to people you trust. If you have trouble managing project ownership, feel free to drop us a line at <a href="mailto:support@fielddoc.org">support@fielddoc.org</a>.</p>
                            <input type="search" class="search" value="" placeholder="Search users" data-ng-model="page.ownerQuery" uib-typeahead="suggestion as suggestion.name for suggestion in page.searchUsers($viewValue)" typeahead-on-select="page.addOwner($item, $model, $label)" typeahead-wait-ms="100" typeahead-template-url="templates/search--tpl.html">
                        </div>

                        <div class="classification--list">
                            <ul>
                                <li data-ng-repeat="owner in page.tempOwners">
                                    <img data-ng-if="owner.properties.picture" style="height: 48px; width: 48px; margin-top: 0; margin-bottom: 0; box-sizing: border-box; border-width: 3px;" class="profile--image img-circle" data-ng-src="{{ owner.properties.picture }}" width="48" height="48" imageonload />
                                    <img data-ng-if="!owner.properties.picture" style="height: 48px; width: 48px; margin-top: 0; margin-bottom: 0; box-sizing: border-box; border-width: 3px;" class="profile--image img-circle" data-ng-src="{{ owner.properties.avatar }}" width="48" height="48" imageonload />
                                    <span data-ng-if="!owner.properties.name" style="flex-shrink: 0; flex-grow: 1; padding-left: 2em;">{{ owner.properties.first_name }} {{ owner.properties.last_name }}</span>
                                    <span data-ng-if="owner.properties.name" style="flex-shrink: 0; flex-grow: 1; padding-left: 2em;">{{ owner.properties.name }}</span>
                                    <div class="button--container">
                                        <button data-ng-if="owner.id !== page.profile.id" type="button" class="button button--danger" data-ng-click="page.removeOwner(owner.id)">Remove</button>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <div class="save--action--wrapper save--action--bottom">
                            <span>Save changes</span>
                            <button type="submit" data-ng-disabled="page.processing">
                                <i class="material-icons" data-ng-if="page.processing">
                                    more_horiz
                                </i>
                                <i class="material-icons" data-ng-if="!page.processing">
                                    done
                                </i>
                            </button>
                        </div>

                    </form>

                </div>

            </article>

        </div>

    </div>

    <nav id="toolbar" class="toolbar" style="float: none; width: auto;">
        <ul>
            <li>
                <a href="/projects/{{ page.project.id }}">
                    <i class="material-icons">
                        dashboard
                    </i>
                </a>
            </li>
            <li data-ng-if="page.permissions.can_edit" data-ng-class="{active: $root.toolbarState.users}">
                <a href="/projects/{{ page.project.id }}/users">
                    <i class="material-icons">
                        group
                    </i>
                </a>
            </li>
            <li data-ng-if="page.permissions.can_edit">
                <a href="/projects/{{ page.project.id }}/edit">
                    <i class="material-icons">
                        edit
                    </i>
                </a>
            </li>
            <li data-ng-if="page.permissions.can_edit">
                <div class="confirm--delete--popup" data-ng-if="page.deletionTarget && page.deletionTarget.id === page.project.id">
                    <p>Do you want to delete this project?</p>
                    <div class="actions">
                        <a class="snapshot--title" href="#" title="Delete forever" data-ng-click="page.deleteFeature('project')">
                            Yes
                        </a>
                        <a class="snapshot--title" href="#" title="Cancel" data-ng-click="page.cancelDelete()">
                            Cancel
                        </a>
                    </div>
                </div>
                <a href="#" data-ng-click="page.confirmDelete(page.project)">
                    <i class="material-icons">
                        delete
                    </i>
                </a>
            </li>
        </ul>
    </nav>

    <div class="transient--notification" data-ng-class="{show: page.alerts.length}">
        <div class="event--container">
            <div data-ng-repeat="alert in page.alerts" data-ng-class="{error: alert.type == 'error', success: alert.type == 'success'}">
                <span class="event--message">{{ alert.msg }}</span>
            </div>
        </div>
    </div>

</main>

<div data-ng-include="'/templates/footer--view.html'"></div>