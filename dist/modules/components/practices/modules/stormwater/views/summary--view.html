<div data-ng-include="'/templates/header--view.html'"></div>

<main class="container" save2pdf pdfName="StormwaterManagement">

  <div data-ng-include="'/modules/components/practices/views/practiceSummaryHeader--view.html'"></div>

  <section class="row feature summary">
    <article class="feature-detail">

      <div class="throbber throbber-small"
           data-ng-if="page.status.loading"></div>

      <div class="column-16 feature-detail-content"
           data-ng-if="!page.status.loading">
        <div class="table-responsive">

          <div data-ng-if="!page.summary.practice.properties.has_planning_data">
            <h2><strong>Empty</strong> Summary</h2>

            <p>No planning or measurement data has been added to this Practice yet. Please add a new Planning measurement period to this Practice to begin.</p>

            <p>
              <a class="button" data-ng-click="page.addReading('Planning')">Add Planning Data</a>
            </p>
          </div>

          <div data-ng-if="page.summary.practice.properties.has_planning_data">
            <table class="table">
              <tbody>
                <tr class="no-rule">
                  <td class="align-left" colspan="{{ page.summary.practice.properties.readings_stormwater.length + 4 }}">
                    <h2><strong>Installation</strong> Summary</h2>
                  </td>
                </tr>

                <tr>
                  <th>&nbsp;</th>
                  <th>&nbsp;</th>
                  <th data-ng-if="report.properties.measurement_period === 'Planning' || report.properties.measurement_period === 'Installation'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    <a href="/projects/{{ page.project.id }}/sites/{{ page.summary.site.id }}/practices/{{ page.summary.practice.id }}/stormwater/{{ report.properties.id }}/edit">
                      <span data-ng-if="report.properties.measurement_period === 'Planning'">Planned</span>
                      <span data-ng-if="report.properties.measurement_period === 'Installation'">Installed</span>
                      <br />
                      {{ report.properties.report_date }}
                    </a>
                  </th>
                  <th>Installed To-Date</th>
                  <th>% of Planned</th>
                </tr>

                <tr>
                  <th>Stormwater Practice #1</th>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.practice_1_name }}
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.practice_1_extent | number:2 }}
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.practice_1_extent | number:2 }}
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.quantity_installed.practice_1_extent | number:0 }} acres
                    </strong>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.percentage_installed.practice_1_extent | number:2 }}%
                    </strong>
                  </td>
                </tr>
                <tr>
                  <th>Stormwater Practice #2</th>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.practice_2_name }}
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.practice_2_extent | number:2 }}
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.practice_2_extent | number:2 }}
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.quantity_installed.practice_2_extent | number:0 }} acres
                    </strong>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.percentage_installed.practice_2_extent | number:2 }}%
                    </strong>
                  </td>
                </tr>
                <tr>
                  <th>Stormwater Practice #3</th>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.practice_3_name }}
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.practice_3_extent | number:2 }}
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.practice_3_extent | number:2 }}
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.quantity_installed.practice_3_extent | number:0 }} acres
                    </strong>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.percentage_installed.practice_3_extent | number:2 }}%
                    </strong>
                  </td>
                </tr>
                <tr>
                  <th>Stormwater Practice #4</th>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.practice_4_name }}
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.practice_4_extent | number:2 }}
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.practice_4_extent | number:2 }}
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.quantity_installed.practice_4_extent | number:0 }} acres
                    </strong>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.percentage_installed.practice_4_extent | number:2 }}%
                    </strong>
                  </td>
                </tr>

                <tr>
                  <th>Impervious Area (sq. ft.)</th>
                  <th>&nbsp;</th>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.impervious_area | number:2 }}
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.impervious_area | number:2 }}
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.quantity_installed.impervious_area | number:0 }} sq. ft.
                    </strong>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.percentage_installed.impervious_area | number:2 }}%
                    </strong>
                  </td>
                </tr>
                <tr>
                  <th>Total Drainage Area (sq. ft.)</th>
                  <th>&nbsp;</th>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.total_drainage_area | number:2 }}
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.total_drainage_area | number:2 }}
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.quantity_installed.total_drainage_area | number:0 }} sq. ft.
                    </strong>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.percentage_installed.total_drainage_area | number:2 }}%
                    </strong>
                  </td>
                </tr>
                <tr>
                  <th>Runoff Volume Captured (acre-ft.)</th>
                  <th>&nbsp;</th>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    --
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.runoff_volume_captured | number:2 }}
                  </td>
                  <td>--</td>
                  <td>--</td>
                </tr>
                <tr>
                  <th>Runoff Depth Treated (in.)</th>
                  <th>&nbsp;</th>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    1.00
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ page.calculateStormwater.runoffDepthTreated(report) || 0 | number:3 }}
                  </td>
                  <td>--</td>
                  <td>--</td>
                </tr>

                <tr class="no-rule">
                  <td class="align-left" colspan="{{ page.summary.practice.properties.readings_stormwater.length + 4 }}">
                    <h2><strong>Adjustor Curve</strong> % Reductions</h2>
                  </td>
                </tr>

                <tr>
                  <th>&nbsp;</th>
                  <th>&nbsp;</th>
                  <th data-ng-if="report.properties.measurement_period === 'Planning' || report.properties.measurement_period === 'Installation'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    <a href="/projects/{{ page.project.id }}/sites/{{ page.summary.site.id }}/practices/{{ page.summary.practice.id }}/stormwater/{{ report.properties.id }}/edit">
                      <span data-ng-if="report.properties.measurement_period === 'Planning'">Planned Reduction</span><span data-ng-if="report.properties.measurement_period === 'Installation'">Installed Reduction</span><br />
                      {{ report.properties.report_date }}
                    </a>
                  </th>
                  <th>&nbsp;</th>
                  <th>&nbsp;</th>
                </tr>

                <tr>
                  <th>Total Nitrogen</th>
                  <td>&nbsp;</td>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                      {{ report.properties.planning.nitrogen.adjustor*100 | number:1 }}%
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.installation.nitrogen.adjustor*100 | number:1 }}%
                  </td>
                  <td>--</td>
                  <td>--</td>
                </tr>

                <tr>
                  <th>Total Phosphorus</th>
                  <td>&nbsp;</td>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                      {{ report.properties.planning.phosphorus.adjustor*100 | number:1 }}%
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.installation.phosphorus.adjustor*100 | number:1 }}%
                  </td>
                  <td>--</td>
                  <td>--</td>
                </tr>

                <tr>
                  <th>Total Sediment</th>
                  <td>&nbsp;</td>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                      {{ report.properties.planning.sediment.adjustor*100 | number:1 }}%
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    {{ report.properties.installation.sediment.adjustor*100 | number:1 }}%
                  </td>
                  <td>--</td>
                  <td>--</td>
                </tr>

                <tr class="no-rule">
                  <td class="align-left" colspan="{{ page.summary.practice.properties.readings_stormwater.length + 4 }}">
                    <h2><strong>Load</strong> &amp; Reductions</h2>
                  </td>
                </tr>

                <tr>
                  <th>&nbsp;</th>
                  <th>Pre-BMP Loads</th>
                  <th data-ng-if="report.properties.measurement_period === 'Planning' || report.properties.measurement_period === 'Installation'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    <a href="/projects/{{ page.project.id }}/sites/{{ page.summary.site.id }}/practices/{{ page.summary.practice.id }}/stormwater/{{ report.properties.id }}/edit">
                      <span data-ng-if="report.properties.measurement_period === 'Planning'">Planned Reduction</span><span data-ng-if="report.properties.measurement_period === 'Installation'">Installed Reduction</span><br />
                      {{ report.properties.report_date }}
                    </a>
                  </th>
                  <th>Reduction To-date</th>
                  <th>% of Planned</th>
                </tr>

                <tr>
                  <th>Nitrogen (lbs/yr)</th>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'id'">
                      <div class="nutrient">
                        <div class="nutrient--option">
                          <span class="nutrient--label">Phase 5.3.2</span><br />
                          <span class="nutrient--value">
                            {{ report.properties.preinstallation.nitrogen.value | number:2 }}
                          </span>
                        </div>
                      </div>
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'id'">
                      <div class="nutrient">
                        <div class="nutrient--option">
                          <span class="nutrient--label">Phase 5.3.2</span><br />
                          <span class="nutrient--value">{{ report.properties.planning.nitrogen.value | number:2 }}</span>
                        </div>
                        <div class="nutrient--option"
                             data-ng-if="report.properties.custom_nutrient_reductions && !page.nutrients.showNutrientForm[report.id]">
                           <span class="nutrient--label">Custom</span><br />
                           <span class="nutrient--value"
                                 data-ng-if="!page.nutrients.showNutrientForm[report.id]">
                              {{ report.properties.custom_nutrient_reductions.nitrogen | number:2 }}
                           </span>
                        </div>
                        <div class="nutrient--option"
                            data-ng-if="page.nutrients.showNutrientForm[report.id]">
                            <span class="nutrient--label">Custom</span><br />
                           <input class="form-control nutrient--input"
                                  type="number" data-ng-model="report.properties.custom_nutrient_reductions.nitrogen" />
                        </div>
                      </div>
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'id'">
                      <div class="nutrient">
                        <div class="nutrient--option">
                          <span class="nutrient--label">Phase 5.3.2</span><br />
                          <span class="nutrient--value">{{ report.properties.installation.nitrogen.value | number:2 }}</span>
                        </div>
                        <div class="nutrient--option"
                             data-ng-if="report.properties.custom_nutrient_reductions && !page.nutrients.showNutrientForm[report.id]">
                           <span class="nutrient--label">Custom</span><br />
                           <span class="nutrient--value"
                                 data-ng-if="!page.nutrients.showNutrientForm[report.id]">
                              {{ report.properties.custom_nutrient_reductions.nitrogen | number:2 }}
                           </span>
                        </div>
                        <div class="nutrient--option"
                            data-ng-if="page.nutrients.showNutrientForm[report.id]">
                            <span class="nutrient--label">Custom</span><br />
                           <input class="form-control nutrient--input"
                                  type="number" data-ng-model="report.properties.custom_nutrient_reductions.nitrogen" />
                        </div>
                      </div>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.quantity_installed.nitrogen | number:2 }} lbs/yr
                    </strong>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.percentage_installed.nitrogen | number:2 }}%
                    </strong>
                  </td>
                </tr>
                <tr>
                  <th>Phosphorus (lbs/yr)</th>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'id'">
                      <div class="nutrient">
                        <div class="nutrient--option">
                          <span class="nutrient--label">Phase 5.3.2</span><br />
                          <span class="nutrient--value">
                            {{ report.properties.preinstallation.phosphorus.value | number:2 }}
                          </span>
                        </div>
                      </div>
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'id'">
                      <div class="nutrient">
                        <div class="nutrient--option">
                          <span class="nutrient--label">Phase 5.3.2</span><br />
                          <span class="nutrient--value">
                            {{ report.properties.planning.phosphorus.value | number:2 }}
                          </span>
                        </div>
                        <div class="nutrient--option"
                             data-ng-if="report.properties.custom_nutrient_reductions && !page.nutrients.showNutrientForm[report.id]">
                           <span class="nutrient--label">Custom</span><br />
                           <span class="nutrient--value"
                                 data-ng-if="!page.nutrients.showNutrientForm[report.id]">
                              {{ report.properties.custom_nutrient_reductions.phosphorus | number:2 }}
                           </span>
                        </div>
                        <div class="nutrient--option"
                            data-ng-if="page.nutrients.showNutrientForm[report.id]">
                            <span class="nutrient--label">Custom</span><br />
                           <input class="form-control nutrient--input"
                                  type="number" data-ng-model="report.properties.custom_nutrient_reductions.phosphorus" />
                        </div>
                      </div>
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'id'">
                      <div class="nutrient">
                        <div class="nutrient--option">
                          <span class="nutrient--label">Phase 5.3.2</span><br />
                          <span class="nutrient--value">
                            {{ report.properties.installation.phosphorus.value | number:2 }}
                          </span>
                        </div>
                        <div class="nutrient--option"
                             data-ng-if="report.properties.custom_nutrient_reductions && !page.nutrients.showNutrientForm[report.id]">
                           <span class="nutrient--label">Custom</span><br />
                           <span class="nutrient--value"
                                 data-ng-if="!page.nutrients.showNutrientForm[report.id]">
                              {{ report.properties.custom_nutrient_reductions.phosphorus | number:2 }}
                           </span>
                        </div>
                        <div class="nutrient--option"
                            data-ng-if="page.nutrients.showNutrientForm[report.id]">
                            <span class="nutrient--label">Custom</span><br />
                           <input class="form-control nutrient--input"
                                  type="number" data-ng-model="report.properties.custom_nutrient_reductions.phosphorus" />
                        </div>
                      </div>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.quantity_installed.phosphorus | number:2 }} lbs/yr
                    </strong>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.percentage_installed.phosphorus | number:2 }}%
                    </strong>
                  </td>
                </tr>

                <tr>
                  <th>Sediment (tons/yr)</th>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'id'">
                      <div class="nutrient">
                        <div class="nutrient--option">
                          <span class="nutrient--label">Phase 5.3.2</span><br />
                          <span class="nutrient--value">
                            {{ report.properties.preinstallation.sediment.value | number:2 }}
                          </span>
                        </div>
                      </div>
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'id'">
                      <div class="nutrient">
                        <div class="nutrient--option">
                          <span class="nutrient--label">Phase 5.3.2</span><br />
                          <span class="nutrient--value">
                            {{ report.properties.planning.sediment.value | number:2 }}
                          </span>
                        </div>
                        <div class="nutrient--option"
                             data-ng-if="report.properties.custom_nutrient_reductions && !page.nutrients.showNutrientForm[report.id]">
                           <span class="nutrient--label">Custom</span><br />
                           <span class="nutrient--value"
                                 data-ng-if="!page.nutrients.showNutrientForm[report.id]">
                              {{ report.properties.custom_nutrient_reductions.sediment | number:2 }}
                           </span>
                        </div>
                        <div class="nutrient--option"
                            data-ng-if="page.nutrients.showNutrientForm[report.id]">
                            <span class="nutrient--label">Custom</span><br />
                           <input class="form-control nutrient--input"
                                  type="number" data-ng-model="report.properties.custom_nutrient_reductions.sediment" />
                        </div>
                      </div>
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'id'">
                      <div class="nutrient">
                        <div class="nutrient--option">
                          <span class="nutrient--label">Phase 5.3.2</span><br />
                          <span class="nutrient--value">
                            {{ report.properties.installation.sediment.value | number:2 }}
                          </span>
                        </div>
                        <div class="nutrient--option"
                             data-ng-if="report.properties.custom_nutrient_reductions && !page.nutrients.showNutrientForm[report.id]">
                           <span class="nutrient--label">Custom</span><br />
                           <span class="nutrient--value"
                                 data-ng-if="!page.nutrients.showNutrientForm[report.id]">
                              {{ report.properties.custom_nutrient_reductions.sediment | number:2 }}
                           </span>
                        </div>
                        <div class="nutrient--option"
                            data-ng-if="page.nutrients.showNutrientForm[report.id]">
                            <span class="nutrient--label">Custom</span><br />
                           <input class="form-control nutrient--input"
                                  type="number" data-ng-model="report.properties.custom_nutrient_reductions.sediment" />
                        </div>
                      </div>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.quantity_installed.sediment | number:2 }} tons/yr
                    </strong>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.percentage_installed.sediment | number:2 }}%
                    </strong>
                  </td>
                </tr>
                <tr data-ng-if="page.summary.practice.properties.has_planning_data">
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td data-ng-if="report.properties.measurement_period === 'Planning'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'id'">
                      <a href="javascript:void(0);" class="button-nutrient" data-ng-click="page.nutrients.addCustomNutrients(report.id)"
                         data-ng-if="!report.properties.custom_nutrient_reductions && !page.nutrients.showNutrientForm[report.id]">
                        Add
                      </a>
                      <a href="javascript:void(0);" class="button-nutrient" data-ng-click="page.nutrients.addCustomNutrients(report.id)"
                         data-ng-if="report.properties.custom_nutrient_reductions && !page.nutrients.showNutrientForm[report.id]">
                        Edit
                      </a>
                      <div data-ng-if="page.nutrients.showNutrientForm[report.id]">
                         <a data-ng-if="report.properties.custom_nutrient_reductions.id"
                            class="pull-left button-nutrient-delete" href="javascript:void(0);"
                            data-ng-click="page.nutrients.deleteCustomNutrients(report)">
                           Delete</a>
                        <a href="javascript:void(0);"
                           class="button-nutrient-cancel"
                           data-ng-click="page.nutrients.cancelCustomNutrients(report.id)">
                          Discard</a>
                        <a data-ng-if="!report.properties.custom_nutrient_reductions.id"
                           class="button-nutrient-save"
                           href="javascript:void(0);" data-ng-click="page.nutrients.saveCustomNutrients(report, 'nutrients_stormwater')">
                          Save
                        </a>
                        <a data-ng-if="report.properties.custom_nutrient_reductions.id"
                           class="button-nutrient-save"
                           href="javascript:void(0);" data-ng-click="page.nutrients.updateCustomNutrients(report)">
                          Update</a>
                      </div>
                      <span data-ng-if="page.nutrients.showNutrientFormSaved[report.id]"><br />Reduction Saved!</span>
                      <span data-ng-if="page.nutrients.showNutrientFormUpdated[report.id]"><br />Reduction Updated!</span>
                      <span data-ng-if="page.nutrients.showNutrientFormDeleted[report.id]"><br />Reduction Deleted!</span>
                  </td>
                  <td data-ng-if="report.properties.measurement_period === 'Installation'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'id'">
                      <a href="javascript:void(0);" class="button-nutrient" data-ng-click="page.nutrients.addCustomNutrients(report.id)"
                         data-ng-if="!report.properties.custom_nutrient_reductions && !page.nutrients.showNutrientForm[report.id]">
                        Add
                      </a>
                      <a href="javascript:void(0);" class="button-nutrient" data-ng-click="page.nutrients.addCustomNutrients(report.id)"
                         data-ng-if="report.properties.custom_nutrient_reductions && !page.nutrients.showNutrientForm[report.id]">
                        Edit
                      </a>
                      <div data-ng-if="page.nutrients.showNutrientForm[report.id]">
                         <a data-ng-if="report.properties.custom_nutrient_reductions.id"
                            class="pull-left button-nutrient-delete" href="javascript:void(0);"
                            data-ng-click="page.nutrients.deleteCustomNutrients(report)">
                           Delete</a>
                        <a href="javascript:void(0);"
                           class="button-nutrient-cancel"
                           data-ng-click="page.nutrients.cancelCustomNutrients(report.id)">
                          Discard</a>
                        <a data-ng-if="!report.properties.custom_nutrient_reductions.id"
                           class="button-nutrient-save"
                           href="javascript:void(0);" data-ng-click="page.nutrients.saveCustomNutrients(report, 'nutrients_stormwater')">
                          Save
                        </a>
                        <a data-ng-if="report.properties.custom_nutrient_reductions.id"
                           class="button-nutrient-save"
                           href="javascript:void(0);" data-ng-click="page.nutrients.updateCustomNutrients(report)">
                          Update</a>
                      </div>
                      <span data-ng-if="page.nutrients.showNutrientFormSaved[report.id]"><br />Reduction Saved!</span>
                      <span data-ng-if="page.nutrients.showNutrientFormUpdated[report.id]"><br />Reduction Updated!</span>
                      <span data-ng-if="page.nutrients.showNutrientFormDeleted[report.id]"><br />Reduction Deleted!</span>
                  </td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>

                <tr class="no-rule">
                  <td class="align-left" colspan="{{ page.summary.practice.properties.readings_stormwater.length + 4 }}">
                    <h2><strong>Chesapeake</strong> Bay Metrics</h2>
                  </td>
                </tr>

                <tr>
                  <th>&nbsp;</th>
                  <th>&nbsp;</th>
                  <th data-ng-if="report.properties.measurement_period === 'Planning' || report.properties.measurement_period === 'Installation'" data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                    <a href="/projects/{{ page.project.id }}/sites/{{ page.summary.site.id }}/practices/{{ page.summary.practice.id }}/stormwater/{{ report.properties.id }}/edit">
                      <span data-ng-if="report.properties.measurement_period === 'Planning'">Planned</span>
                      <span data-ng-if="report.properties.measurement_period === 'Installation'">Installed</span>
                      <br />
                      {{ report.properties.report_date }}
                    </a>
                  </th>
                  <th>Installed To-date</th>
                  <th>% of Planned</th>
                </tr>

                <tr>
                  <th>Gallons/Year of Stormwater Detained or Infiltrated</th>
                  <td>&nbsp;</td> <!-- Empty because of Pre-BMP Load -->
                  <td data-ng-if="report.properties.measurement_period === 'Planning' || report.properties.measurement_period === 'Installation'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'id'">
                      {{ report.properties.metrics.gallons_per_year_of_stormwater_detained_or_infiltrated | number:2 }}
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.quantity_installed.gallons_per_year_of_stormwater_detained_or_infiltrated | number:2 }}
                    </strong>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.percentage_installed.gallons_per_year_of_stormwater_detained_or_infiltrated | number:2 }}%
                    </strong>
                  </td>
                </tr>

                <tr>
                  <th>Acres of Protected by BMP's to Reduce Stormwater Runoff</th>
                  <td>&nbsp;</td> <!-- Empty because of Pre-BMP Load -->
                  <td data-ng-if="report.properties.measurement_period === 'Planning' || report.properties.measurement_period === 'Installation'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'id'">
                      {{ report.properties.metrics.acres_of_protected_bmps_to_reduce_stormwater_runoff | number:2 }}
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.quantity_installed.acres_of_protected_bmps_to_reduce_stormwater_runoff | number:2 }}
                    </strong>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.percentage_installed.acres_of_protected_bmps_to_reduce_stormwater_runoff | number:2 }}%
                    </strong>
                  </td>
                </tr>

                <tr>
                  <th>Acres of stormwater BMPs installed</th>
                  <td>&nbsp;</td> <!-- Empty because of Pre-BMP Load -->
                  <td data-ng-if="report.properties.measurement_period === 'Planning' || report.properties.measurement_period === 'Installation'"
                      data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'id'">
                      {{ report.properties.metrics.acres_of_installed_bmps_to_reduce_stormwater_runoff | number:2 }}
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.quantity_installed.acres_of_installed_bmps_to_reduce_stormwater_runoff | number:2 }}
                    </strong>
                  </td>
                  <td>
                    <strong>
                      {{ page.summary.practice.properties.percentage_installed.acres_of_installed_bmps_to_reduce_stormwater_runoff | number:2 }}%
                    </strong>
                  </td>
                </tr>

              </tbody>
            </table>
          </div>

          <div data-ng-if="page.summary.practice.properties.has_planning_data">
            <h2><strong>Notes</strong></h2>
            <table class="table">
              <thead>
                <tr>
                  <th class="align-left" width="10%">Date</th>
                  <th class="align-left" width="90%">Notes</th>
                </tr>
              </thead>
              <tbody>
                <tr data-ng-repeat="report in page.summary.practice.properties.readings_stormwater | orderBy:'report_date':false">
                  <td class="align-left">
                    <a href="/projects/{{ page.project.id }}/sites/{{ page.summary.site.id }}/practices/{{ page.summary.practice.id }}/stormwater/{{ report.properties.id }}/edit">
                      {{ report.properties.report_date }}
                    </a>
                  </td>
                  <td class="align-left" data-ng-if="report.properties.notes">{{ report.properties.notes }}</td>
                  <td class="align-left" data-ng-if="!report.properties.notes"><em>No notes recorded for this date</em></td>
                </tr>
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </article>
  </section>
</main>

<div data-ng-include="'/modules/components/practices/modules/stormwater/views/citations--view.html'"></div>

<div data-ng-include="'/templates/footer--view.html'"></div>
