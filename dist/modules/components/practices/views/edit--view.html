<div data-ng-include="'/templates/header--view.html'"></div>

<main class="site--content--flow fluid-content clearfix distinguish">

    <div id="sidebar" data-ng-include="'/templates/side-bar.html'"></div>

    <div class="content--container" style="border-right: 1px solid #e0e0e0;">

        <div class="progress--modal reveal fade-in t0" data-ng-if="page.status.loading">
            <div class="progress--container">
                <p style="font-weight: bold;" class="color-pulse">Loading report data&hellip;</p>
            </div>
        </div>

        <section class="privacy-message reveal fade-in t0" data-ng-if="!page.status.loading && page.makePrivate">

            <p>
                <i class="material-icons">
                    lock
                </i>
            </p>

            <p>This practice is private.</p>

        </section>

        <div class="main--ui breadcrumb-ui">
           <div class="group">
                    <article class="breadcrumb" >
                        <p>
                            <nobr>
                                Project: <a href="/projects/{{page.practice.project.id}}">{{page.practice.project.name}}</a>
                                    /
                            </nobr>
                            <nobr>
                                   <!-- <sub><i class="icon material-icons" style=""> chevron_right</i></sub> -->
                                Site: <a href="/sites/{{page.practice.site.id}}">{{page.practice.site.name}}</a>
                                    /
                            </nobr>
                                Practice: <a href="/practices/{{page.practice.id}}">{{ page.practice.name }}</a>
                                    /
                            </nobr>
                            <nobr data-ng-if="page.report.report_date">
                                Report <a href="/reports/{{page.report.id}}/edit">{{page.report.report_date | date}}</a>

                            </nobr>
                             <nobr data-ng-if="!page.report.report_date">
                                Report <a href="/reports/{{page.report.id}}/edit">{{page.report.measurement_period}}</a>

                            </nobr>
                        </p>
                    </article>
                </div>
        </div>

        <h1 class="inset reveal fade-in t0" data-ng-if="!page.status.loading && !page.makePrivate">Edit report</h1>

        <div class="main--ui reveal fade-in t0" data-ng-if="!page.status.loading && !page.makePrivate">

            <article class="feature-detail">

                <div class="feature-detail-content">

                    <form data-ng-submit="page.saveReport()" class="form" role="form" autocomplete="off">

                        <h2>
                            Report date and measurement period
                        </h2>

                        <div class="form-element">
                            <span class="meta-label"><b>Month</b></span>
                            <input id="report_date_month" name="report_date_month" type="text" value="page.date.month" data-ng-model="page.date.month" uib-typeahead="month.name for month in page.months | filter:$viewValue | limitTo:5" typeahead-min-length="0" typeahead-template-url="templates/search--tpl.html" required="required">
                        </div>

                        <div class="form-element">
                            <span class="meta-label"><b>Date</b></span>
                            <input type="number" min="1" max="31" step="1" id="report_date_date" name="report_date_date" data-ng-model="page.date.date" />
                        </div>

                        <div class="form-element">
                            <span class="meta-label"><b>Year</b></span>
                            <input number type="number" min="1900" step="1" id="report_date_year" name="report_date_year" data-ng-model="page.date.year" />
                        </div>

                        <div>

                            <div class="form-element">

                                <div class="form-element">
                                    <span class="meta-label"><b>Practice area</b></span>
                                    <input class="form-control" data-ng-model="page.report.practice_extent" id="practice_extent" name="practice_extent" step="0.0001" type="number" placeholder="0" />
                                </div>

                                <div class="form-element">
                                    <span class="meta-label"><b>Area units</b></span>
                                    <input type="text" class="form-control" id="email" name="email" disabled="disabled" value="acres" required="required" readonly />
                                    <p style="color: #9e9e9e; font-size: 0.9em; font-style: normal; margin-top: 0.5em;">
                                        Practice area is standardized to acres.
                                    </p>
                                </div>

                            </div>

                        </div>

                        <h2>Implementation progress</h2>

                        <div style="margin: 0 0 4em;">

                            <p style="font-style: normal; font-size: 1em; color: #616161;">The metrics listed here are associated with the <strong>{{ page.practice.name }}</strong> practice. Track implementation by entering a numeric value for one or more metrics. If you try to add a progress value that exceeds a metric’s baseline practice value, FieldDoc will cap the site target’s value for you.</p>

                            <br />

                            <ul class="target-lst" data-ng-if="page.targets && page.targets.active.length">
                                <li data-ng-repeat="target in page.targets.active">
                                    <div>{{ target.metric.name || target.name }}</div>
                                    <input type="text" class="form-control" data-ng-model="target.target" id="target-active-{{ $index }}" name="target-active-{{ $index }}" placeholder="0" autocomplete="off" disabled="disabled" readonly />
                                    <input type="number" class="form-control" data-ng-model="target.value" id="name-active-{{ $index }}" name="name-active-{{ $index }}" placeholder="0" step="0.0001" min="0" autocomplete="off" />
                                    <button type="button" class="add-item" data-ng-click="page.removeTarget(target, $index)" data-ng-disabled="page.status.processing">
                                        <i class="material-icons">
                                            remove_circle
                                        </i>
                                    </button>
                                </li>
                            </ul>

                            <ul class="target-lst">
                                <li style="justify-content: flex-end; margin-top: 2em; border-top: 1px solid #e0e0e0; padding-top: 1em;">
                                    <button type="button" class="add-item" data-ng-click="page.removeAll()" data-ng-disabled="page.status.processing">
                                        <i class="material-icons">
                                            delete_sweep
                                        </i>
                                    </button>
                                    <button type="button" class="add-item" style="margin-left: 1em;" data-ng-click="page.saveTargets()" data-ng-disabled="page.status.processing">
                                        <i class="material-icons">
                                            done
                                        </i>
                                    </button>
                                </li>
                            </ul>

                            <ul class="target-lst target-lst-inactive" data-ng-if="page.targets">
                                <li data-ng-repeat="target in page.targets.inactive">
                                    <div>{{ target.name || target.metric.name }}</div>
                                    <input type="text" class="form-control" data-ng-model="target.target" id="target-inactive-{{ $index }}" name="target-inactive-{{ $index }}" placeholder="0" autocomplete="off" disabled="disabled" readonly />
                                    <input type="number" class="form-control" data-ng-model="target.value" id="name-inactive-{{ $index }}" name="name-inactive-{{ $index }}" placeholder="0" step="0.0001" min="0" autocomplete="off" />
                                    <button type="button" class="add-item" data-ng-click="page.addTarget(target, $index)" data-ng-disabled="page.status.processing">
                                        <i class="material-icons">
                                            add_circle
                                        </i>
                                    </button>
                                </li>
                            </ul>

                        </div>

                        <div class="form-element">
                            <span class="meta-label"><b>Notes</b></span>
                            <textarea class="form-control" msd-elastic data-ng-model="page.report.notes" maxlength="1000" rows="10">{{ page.report.notes }}</textarea>
                            <p style="color: #616161; font-size: 0.9em; font-style: normal; margin-top: 0.5em;">
                                Notes may contain up to 1,000 characters, including spaces and punctuation. <strong>({{ (page.report.notes.length || 0) | number }} used)</strong>
                            </p>
                        </div>

                        <div class="save--action--wrapper save--action--bottom">
                            <button type="submit" data-ng-disabled="page.status.processing">
                                <i class="material-icons" data-ng-if="page.status.processing">
                                    more_horiz
                                </i>
                                <i class="material-icons" data-ng-if="!page.status.processing">
                                    done
                                </i>
                            </button>
                        </div>

                    </form>

                </div>

            </article>

        </div>

    </div>

    <nav id="toolbar" class="toolbar" style="float: none; width: auto;">
        <ul>
            <li data-ng-class="{active: $root.toolbarState.dashboard}">
                <a href="/practices/{{ page.practice.id }}" title="Summary">
                    <i class="material-icons">
                        dashboard
                    </i>
                </a>
            </li>
            <li>
                <a href="/practices/{{ page.practice.id }}/edit" title="Edit">
                    <i class="material-icons">
                        edit
                    </i>
                </a>
            </li>
            <li>
                <div class="confirm--delete--popup" data-ng-if="page.deletionTarget && page.deletionTarget.id === page.report.id">
                    <p>Do you want to delete this report?</p>
                    <div class="actions">
                        <a class="snapshot--title" href="#" title="Delete forever" data-ng-click="page.deleteFeature()">
                            Yes
                        </a>
                        <a class="snapshot--title" href="#" title="Cancel" data-ng-click="page.cancelDelete()">
                            Cancel
                        </a>
                    </div>
                </div>
                <a href="#" data-ng-click="page.confirmDelete(page.report)" title="Delete">
                    <i class="material-icons">
                        delete
                    </i>
                </a>
            </li>
        </ul>
    </nav>

    <div class="transient--notification" data-ng-class="{show: page.alerts.length}">
        <div class="event--container">
            <div data-ng-repeat="alert in page.alerts" data-ng-class="{error: alert.type == 'error', success: alert.type == 'success'}">
                <span class="event--message">{{ alert.msg }}</span>
            </div>
        </div>
    </div>

</main>

<div data-ng-include="'/templates/footer--view.html'"></div>